"""
This script will place and set your sources from a list
Copy and paste it in PreonLab Python GUI
You may need to convert your sources direction (normal vector to source) into euler angles using euler_from_vecs.py
Have fun !
"""

import preonpy
import math

s = preonpy.current_scene

#INPUT DATA
#Name = [M21 , M12 , M23 , M38 , M89 , M24 , M45 , M56 , M67 , G11 , G12 , B2 , G2 , G8 , G32 , G31 , G7]
index = [0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , 14 , 15 , 16]
diameter = [0.89 , 0.89 , 1.1 , 0.72 , 0.72 , 0.72 , 0.72 , 0.72 , 0.72 , 1.75 , 1.98 , 0.72 , 0.92 , 0.85 , 0.85 , 0.72 , 0.72]
dirx = [-0.3482 , 0.96148 , -0.54464 , 0.5807 , 0.09758 , 0 , 0 , 0 , 0.84383 , -0.06853 , -0.19423 , 1 , 1 , -0.37461 , -0.12187 , 0.58779 , 0.52916]
diry = [-0.14608 , -0.25778 , 0.41934 , 0.80175 , 0.96132 , -0.58779 , 0.18738 , -0.08716 , -0.2611 , -0.68073 , -0.91968 , 0 , 0 , 0.9131 , -0.54058 , -0.44062 , -0.80528]
dirz = [0.92597 , 0.09545 , -0.72631 , 0.14137 , 0.25758 , 0.80902 , -0.98229 , -0.99619 , -0.46881 , 0.72932 , 0.34127 , 0 , 0 , -0.161 , 0.83242 , 0.6785 , -0.26742]
posx = [2.5883146138850806 , 2.5960501339246194 , 2.7015694439938369 , 2.6480701557932691 , 2.6390668134200537 , 2.670910469267755 , 2.6459104692677733 , 2.6459058851388608 , 2.6148981739572652 , 2.5901703276766535 , 2.5891270814223581 , 2.7120404692677731 , 2.7120404692677731 , 2.605522822198171 , 2.6062915552376111 , 2.6117147412887993 , 2.6128069448768114]
posy = [2.821441937426246 , 2.859349909375736 , 2.8034483921068816 , 2.9734629780957338 , 2.9739135297810777 , 2.7396491883439564 , 2.6118774797674713 , 2.4881825646879543 , 2.3016510263525767 , 2.8055485347715461 , 2.8027639353905789 , 2.7901180578379066 , 2.7907580172922373 , 2.9841356725639905 , 2.94749291319361 , 2.948016029782031 , 2.2958867572065569]
posz = [1.7748342755823043 , 1.7367419724377673 , 1.8311730891975431 , 1.8725009346056354 , 1.8731893301619551 , 1.7840842038301243 , 1.7965950625612739 , 1.7940138833079113 , 1.8007295810583543 , 1.783846991537029 , 1.7812010756572831 , 1.7709003534025705 , 1.7472011781421024 , 1.8687270583730788 , 1.7733757982616365 , 1.7725209566681215 , 1.7852212033638613]
flow_rate = [17.3 , 16.4 , 20.5 , 10.9 , 10.8 , 11.8 , 11.8 , 11.8 , 11.5 , 69.1 , 88.4 , 13.4 , 20.6 , 12.4 , 10.8 , 10.9 , 11.5]

#CONVERTED DATA
#Convertion using euler_from_vecs.py :
euler_angle_x =  [-74.78335480153876, -5.491889915175443, 82.8187958807532, -8.934850165506614, -160.1926303983068, -53.99988115118343, 100.79989649755574, 84.99973354380433, 29.586009557282967, -46.85652832272698, -19.966661772553866, 0.0, 0.0, 12.921970976785582, -56.53572322496662, -44.91800221577139, 15.559885097378706]
euler_angle_y =  [-16.339346515760642, 4.184256308209275, 42.94142294489509, 24.46201016768259, 40.52370178548479, -0.0, -0.0, -0.0, -18.281732912183944, -1.7040741179522947, -1.9787637869265893, -0.0, -0.0, 43.94907204093644, -3.775646361978948, 16.071384856696906, -4.495777612270216]
euler_angle_z =  [-21.27559289607883, 74.58960131786203, -48.07246069766973, 140.35967913616977, 7.375480633115092, 0.0, 0.0, 0.0, 62.708302232159, -3.9313062063586237, -11.206504567062606, 90.0, 90.0, -148.6461875725726, -7.015333294511801, 37.71216264604828, 32.059069654296614]

#CODE
for i in index :
	source = s.create_object("Area source")
	source["area type"] = "Circle"
	source["scale"] = [diameter[i] / 1000, diameter[i] / 1000, diameter[i] / 1000]
	source["position"] = [posx[i], posy[i], posz[i]]
	source["inflow unit"] = "volumeFlowRate"
	source["volume flow rate"] = flow_rate[i]
	source["euler angles"] = [euler_angle_x[i], euler_angle_y[i], euler_angle_z[i]]
	"""
	#Rain mode allows to force right emitting speed, but particle cohesion will be lost
	#Normal mode : Iooooooooo
	#Rain mode : Io  o  o  o  o  o  o  o
	source["emit type"] = "rain"
	source["emit velocity"] = flow_rate[i] / (math.pi * ((diameter[i] / 1000)**2) / 4)
	"""
